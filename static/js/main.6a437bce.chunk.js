(this["webpackJsonpdisaster-message"]=this["webpackJsonpdisaster-message"]||[]).push([[0],{26:function(e,t,a){e.exports=a(56)},31:function(e,t,a){},4:function(e,t,a){e.exports={"item-box":"Disaster_item-box__DHSEJ",title:"Disaster_title__3rmcc","create-date":"Disaster_create-date__3aZk3","location-name":"Disaster_location-name__JKmPg",msg:"Disaster_msg__39dll"}},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),s=(a(31),a(3)),i=a.n(s),l=a(7),u=a(25),m=a(5),d=a(8),f=function(e){return{type:"GET_MESSAGE_SUCCESS",data:e}},E={loading:!1,data:[],error:!1};var g=a(23),p=a.n(g),v=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="http://apis.data.go.kr/1741000/DisasterMsg2/getDisasterMsgList?ServiceKey=".concat("MpTTK5tgzlmZcNG%2BbB%2Bs0iuaIKortq8%2F1gtsS%2BEEdA8F07g3BngFnTX0Q2ZNNaz8ogDKjZ4XmgawC5Rwr1OlaA%3D%3D","&pageNo=").concat(t,"&numOfRows=20&type=json&flag=y"),e.next=3,p.a.get(a);case 3:return n=e.sent,console.log(n.status),e.abrupt("return",n.data.DisasterMsg[1].row);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=a(4),b=a.n(_);function h(e){var t=e.location_name,a=e.create_date;return r.a.createElement("div",{className:b.a.title},r.a.createElement("div",{className:b.a["create-date"]},a),r.a.createElement("div",{className:b.a["location-name"]},t))}function O(e){var t=e.msg;return r.a.createElement("div",{className:b.a.msg},t)}var S=function(e){return r.a.createElement("div",{className:b.a["item-box"]},r.a.createElement(h,{location_name:e.location_name,create_date:e.create_date}),r.a.createElement(O,{msg:e.msg}))},j=function(e){var t=e.value.map((function(e){return e.map((function(e,t){return r.a.createElement(S,Object.assign({},e,{key:t}))}))}));return r.a.createElement(r.a.Fragment,null,t)},w=a(9),D=a.n(w),x=function(){var e=Object(m.c)((function(e){return e.disaster})),t=e.loading,a=e.data,c=(e.error,Object(n.useRef)(1)),o=Object(n.useState)(""),s=Object(u.a)(o,2),d=s[0],E=s[1],g=Object(m.b)(),p=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"GET_MESSAGE"}),e.prev=1,e.next=4,v(c.current);case 4:t=e.sent,c.current+=1,console.log(c.current),console.log(t),g(f(t)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),g({type:"GET_MESSAGE_ERROR"});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){window.addEventListener("scroll",_,!0)}),[]),Object(n.useEffect)((function(){p()}),[]),Object(n.useEffect)((function(){console.log(c.current),console.log("\ubc14\ub01c")}),[c]);var _=Object(n.useCallback)((function(){var e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t=Math.max(document.documentElement.scrollTop,document.body.scrollTop),a=document.documentElement.clientHeight;Math.round(t+a)===e&&(console.log("\ud398\uc774\uc9c0 \ub05d"),p())}),[p]),b=Object(n.useCallback)((function(e){E(e.target.value)}),[E]);return r.a.createElement("div",{className:D.a.list},0===a.length?"LOADING...":function(){var e=a.map((function(e,t){return e.filter((function(e){return-1!==e.location_name.indexOf(d)}))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:D.a.input,type:"text",placeholder:"\uc9c0\uc5ed\uc744 \uac80\uc0c9\ud558\uc138\uc694",value:d,onChange:b}),r.a.createElement(j,{value:e}),t?"LOADING...":r.a.createElement("div",{className:D.a.btn,onClick:p},"\ub354\ubcf4\uae30"))}())};var y=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(2),N=Object(G.combineReducers)({disaster:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MESSAGE":return Object(d.a)(e,(function(e){e.loading=!0,e.error=!1}));case"GET_MESSAGE_SUCCESS":var a=t.data;return Object(d.a)(e,(function(e){e.data.push(a),e.loading=!1,e.error=!1}));case"GET_MESSAGE_ERROR":return Object(d.a)(e,(function(e){e.loading=!1,e.error=!0}));default:return e}}}),k=a(24),M=Object(G.createStore)(N,Object(k.composeWithDevTools)());o.a.render(r.a.createElement(m.a,{store:M},r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports={list:"Disaster_list__2JDcq",input:"Disaster_input__1XxI4",btn:"Disaster_btn__3dYB3"}}},[[26,1,2]]]);
//# sourceMappingURL=main.6a437bce.chunk.js.map